  {% extends "usuarios/instructor/dashboard.html" %}
{% block title %}Mis Horarios{% endblock %}

{% block instructor_content %}
<style>
  .dia-columna {
    min-height: 60vh;
    background-color: #f0f9f0; /* Verde muy claro */
    border: 2px solid #39A900; /* Verde SENA */
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(57, 169, 0, 0.3);
  }
  .evento-card {
    transition: transform .3s ease-in-out, box-shadow .3s ease-in-out;
    border-left: 6px solid #39A900; /* Verde SENA */
    background-color: #ffffff; /* Blanco */
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .evento-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.25);
  }
  .dia-Lunes .evento-card { border-left-color: #39A900; }
  .dia-Martes .evento-card { border-left-color: #39A900; }
  .dia-Miércoles .evento-card { border-left-color: #39A900; }
  .dia-Jueves .evento-card { border-left-color: #39A900; }
  .dia-Viernes .evento-card { border-left-color: #39A900; }
  .dia-Sábado .evento-card { border-left-color: #39A900; }
  h5, h6 {
    color: #212529;
  }
  select.form-select {
    border: 2px solid #39A900;
    border-radius: 6px;
    box-shadow: none;
    transition: border-color 0.3s ease;
  }
  select.form-select:focus {
    border-color: #07b449;
    box-shadow: 0 0 8px #07b449aa;
    outline: none;
  }
</style>

<div class="card p-4 shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h5 class="mb-0">Mis Horarios de Formación</h5>
    <div class="d-flex">
      <select class="form-select" style="width: 200px;">
        <option selected>Filtrar por ficha...</option>
        <option value="1">Ficha 2556678</option>
        <option value="2">Ficha 2558341</option>
      </select>
    </div>
  </div>

  <div class="row g-3">
    {% for dia, horarios_del_dia in horarios_por_dia.items %}
    <!-- Columna para cada día -->
    <div class="col-lg-4 col-xl-2">
      <div class="rounded p-3 dia-columna dia-{{ dia }}">
        <h6 class="text-center fw-bold border-bottom pb-3 mb-4">{{ dia }}</h6>
        
        {% for horario in horarios_del_dia %}
        <!-- Tarjeta de evento de horario -->
        <div class="card shadow-sm mb-4 evento-card horario-card" data-bs-toggle="modal" data-bs-target="#horarioModal"
             data-competencia="{{ horario.competencia }}" data-instructor="{{ horario.instructor }}" data-programa="{{ horario.programa }}"
             data-ficha="{{ horario.ficha_numero }}" data-dia="{{ dia }}" data-hora-inicio="{{ horario.hora_inicio }}"
             data-hora-fin="{{ horario.hora_fin }}" data-ambiente="{{ horario.ambiente }}" style="cursor: pointer;">
          <div class="card-body p-3">
            <p class="card-title fw-bold mb-2" style="font-size: 1rem;">{{ horario.competencia }}</p>
            <p class="card-subtitle mb-3 text-muted" style="font-size: 0.85rem;">Ficha #{{ horario.ficha_numero }}</p>
            <div class="d-flex justify-content-between align-items-center" style="font-size: 0.85rem;">
              <span class="text-muted"><i class="bi bi-clock me-2"></i>{{ horario.hora_inicio }} - {{ horario.hora_fin }}</span>
              <span class="text-muted"><i class="bi bi-geo-alt me-2"></i>{{ horario.ambiente }}</span>
            </div>
            <small class="text-muted"><i class="bi bi-person me-1"></i>{{ horario.instructor }}</small>
          </div>
        </div>
        {% empty %}
        <div class="text-center text-muted mt-5" style="font-size: 0.9rem;">
          <i class="bi bi-cup-hot fs-4"></i>
          <p class="mb-0 mt-2">Sin clases</p>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>

</div>

<!-- Modal para Detalles del Horario -->
<div class="modal fade" id="horarioModal" tabindex="-1" aria-labelledby="horarioModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #f0f9f0; border-bottom: 1px solid #39A900;">
        <h5 class="modal-title" id="horarioModalLabel">Detalles del Horario</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Competencia:</strong> <span id="modal-competencia"></span></p>
            <p><strong>Instructor:</strong> <span id="modal-instructor"></span></p>
            <p><strong>Programa:</strong> <span id="modal-programa"></span></p>
          </div>
          <div class="col-md-6">
            <p><strong>Ficha:</strong> <span id="modal-ficha"></span></p>
            <p><strong>Día:</strong> <span id="modal-dia"></span></p>
            <p><strong>Hora:</strong> <span id="modal-hora"></span></p>
            <p><strong>Ambiente:</strong> <span id="modal-ambiente"></span></p>
          </div>
        </div>
        <hr>
        <p class="text-muted">Haz clic en una clase para ver más detalles aquí.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function () {
  const horarioCards = document.querySelectorAll('.horario-card');
  const modal = new bootstrap.Modal(document.getElementById('horarioModal'));

  horarioCards.forEach(card => {
    card.addEventListener('click', function () {
      const competencia = this.getAttribute('data-competencia');
      const instructor = this.getAttribute('data-instructor');
      const programa = this.getAttribute('data-programa');
      const ficha = this.getAttribute('data-ficha');
      const dia = this.getAttribute('data-dia');
      const horaInicio = this.getAttribute('data-hora-inicio');
      const horaFin = this.getAttribute('data-hora-fin');
      const ambiente = this.getAttribute('data-ambiente');

      document.getElementById('modal-competencia').textContent = competencia;
      document.getElementById('modal-instructor').textContent = instructor;
      document.getElementById('modal-programa').textContent = programa;
      document.getElementById('modal-ficha').textContent = ficha;
      document.getElementById('modal-dia').textContent = dia;
      document.getElementById('modal-hora').textContent = `${horaInicio} - ${horaFin}`;
      document.getElementById('modal-ambiente').textContent = ambiente;

      modal.show();
    });
  });
});
</script>
{% endblock %}
{% endblock %}
